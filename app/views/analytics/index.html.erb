
<%#= REPORTS FOR CUSTOMER "@customer_name" %>
<strong>Timesheets for Each Month</strong>
<div class = "toggle line_graph">
	<%= line :line_chart, @lineSize, @line_data.to_json %>
</div>

<div class ="toggle timesheets-table-field"> 
	<table>
		<tr>
			<th> Months</th>
			<th> New Timesheets </th>
			<th> Submitted Timesheets </th>
			<th> Approved Timesheets </th>
			<th> Rejected Timesheets </th>
		</tr>
		<% @month_names.each_with_index do |mn,i| %>
		<tr>
			<td><%= mn %></td>
			<td><%= @new_count_array[i] %></td>
			<td><%= @submitted_count_array[i] %></td>
			<td><%= @approved_count_array[i] %></td>
			<td><%= @rejected_count_array[i] %></td>
		</tr>
		<%end %>
	</table>
</div>

<strong>Number of users per Project</strong>

<div class ="toggle bar-field"> 
	<%= bar :bar_chart, @barSize, @bar_data_2.to_json, @bar_options %>
</div>

<div class ="toggle table-field"> 
	<table>
		<tr>
			<th> Project</th>
			<th> Number of Users </th>
		</tr>
		<% @project_ids.each do |pi| %>

		<tr>
			<td><%= Project.find(pi).name %></td>
			<td><%= Project.find(pi).users.count %></td>
		</tr>
		<% end %>
	</table>
</div>

<%#= bar :bar_chart, @barSize, @bar_data_2.to_json %>
<%#= bar :bar_chart, @barSize, @bar_data_3.to_json %>

<strong>Pie Graph for Employment Types</strong>
<div class = "pie_employment_types">
	<%= pie :pie_chart, @pieSize, @pie_data_2.to_json %>
</div>

<div class = "employment_types_table">
<table>
	<tr>
		<th> Employment Types</th>
		<th> Number of users </th>
	</tr>
	<% @cus_emp_types.each_with_index do |cemp, i| %>
		<tr>
			<td><%=  @cus_emp_names[i] %></td>
			<td><%=  @user_emp_count[i] %></td>
		</tr>
	<% end %>
</table>
</div>

<%#= h_funnel :h_bar, @barSize, @bar_data_2.to_json %>
<strong>Bar Graph for vacation Request</strong>
<div class = "vacation_request_bar">
	<%= bar :line_chart_2, @lineSize, @line_data_2.to_json %>
</div>

<div class = "vacation_request_table">
<table>
	<tr>
		<th> Vaction Types</th>
		<th> Number of Vacation Requests </th>
	</tr>
	<% @vacation_types.each_with_index do |cemp, i| %>
		<tr>
			<td><%=  @vacation_types[i] %></td>
			<td><%=  @vac_req_count[i] %></td>
		</tr>
	<% end %>
</table>
</div>

<div class = "user_details_link">
	<strong>User Activities</strong>
</div>

<div class = "user_details_table">
	<strong>Table for User Activities </strong>
<table>
	<tr>
		<th> Project Name</th>
		<th> User </th>
		<th> Last Logged In </th>
		<th> Sign in Count </th>
	</tr>
	<% @project_ids.each do |pid| %>
		<%project = Project.find(pid)%>
		<% project.users.each do |user| %>
		<tr>
			<td><%=  project.name %></td>
			<td><%=  user.first_name %></td>
			<td><%=  user.last_sign_in_at %></td>
			<td><%=  user.sign_in_count %></td>

		</tr>
	<% end %>
	<% end %>

</table>
</div>

<%= link_to('REPORTS', "/customer_reports/#{params[:customer_id]}", target: :_blank ) %>
